<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" id="uwo">
<head>

    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />

    <!--[if lte IE 6]>
        <script type="text/JavaScript"> try { document.execCommand("BackgroundImageCache", false, true); } catch(err) {} </script>
        <link rel="stylesheet" type="text/css" href="http://static.weboffice.uwa.edu.au/visualid/styles/id-ie6down.css" media="all" />
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/newcss/visual_id-core.css" media="all" />
    <link rel="stylesheet" type="text/css" href="/newcss/visual_id-nonvisual.css" media="aural, braille" />
    <link rel="stylesheet" type="text/css" href="/newcss/visual_id-print.css" media="print" />

    <script type="text/JavaScript" src="/newcss/visual_id-core.js"></script>
<!-- Begin CSS in the queue to be promoted to core or a devices file -->

<link media="all" href="/newcss/designs_contact_us_compatibility.css" type="text/css" rel="stylesheet" />

<link media="all" href="/newcss/designs_testimonial_dl.css" type="text/css" rel="stylesheet" />

<link media="print" href="/newcss/designs_core_print.css" type="text/css" rel="stylesheet" />

<link media="all" href="/newcss/designs_graduate_profiles.css" type="text/css" rel="stylesheet" />

<link media="all" href="/newcss/designs_newsarticle.css" type="text/css" rel="stylesheet" />

<link media="all" href="/newcss/designs_studentnet_definition_lists.css" type="text/css" rel="stylesheet" />

<link media="all" href="cnet.css" type="text/css" rel="stylesheet" />

<!-- <link media="all" href="http://static.weboffice.uwa.edu.au/visualid/styles/id-cat.php?include=site-sections" type="text/css" rel="stylesheet" />Edit 2009.05.21, Guan Ming Teo: temporary fix until we find them all in new core -->
<!-- <link media="all"
href="/newcss/designs_mings-landing-3-col-layout.css" type="text/css"
rel="stylesheet" /> -->
<!--<link media="all" href="http://www-p1.matrix.its.uwa.edu.au/_designs/newcss/devices_-_dev/aus-int_listicons.css" type="text/css" rel="stylesheet" />-->

<!-- End staging CSS -->
<link media="all" href="/newcss/visual_id-cat.css" type="text/css" rel="stylesheet" />
<link rel="stylesheet" type="text/css" href="/newcss/designs_school-csse.css" media="all" />

<style type="text/css"> #headertitle { background-image: url("/newcss/graphics/school-csse.gif"); } </style>

    <title>The cnet network simulator (v3.3.1)</title>

</head>
<body class="pagetype-landing landing-3-col faculty-ecm">

<div id="bodycontainer">
<!--begin #IEroot targeting [by Hiroki Chalfant]-->
<!--[if IE]><div id="ieAny"><![endif]-->
<!--[if lte IE 6]><div id="ie6down"><![endif]-->
<!--[if IE 7]><div id="ie7"><![endif]-->
<!--[if gte IE 8]><div id="ie8up"><![endif]-->


    <!-- Topmost block, including the search form -->
    <div id="Xeadercontainer">
        <!--[if IE 6]><div class="ie6expander"><div class="ie6sizer"><![endif]-->

	<table style="width: 100%;">
	<tr style="height: 3px; background-color: #ce7019;">
		<td colspan="2"></td>
	</tr>

	<tr style="height: 6px; background-color: black;">
	    <td colspan="2">
            <div id="ql_outer"><div id="ql_inner">
<!--begin-quicklinks-list-->
                <ul id="ql_list">
                    <li><a href="http://www.uwa.edu.au/atoz" onclick="dcsMultiTrack('WT.ac', 'Quicklinks%20AtoZ');">A-Z websites</a></li>
                    <li><a href="http://www.uwa.edu.au/contact" onclick="dcsMultiTrack('WT.ac', 'Quicklinks%20Contact');">Contact us</a></li>
                    <li><a href="http://www.uwa.edu.au/campus_map" onclick="dcsMultiTrack('WT.ac', 'Quicklinks%20CampusMap');">Campus map</a></li>
                    <li><a href="http://www.library.uwa.edu.au/" onclick="dcsMultiTrack('WT.ac', 'Quicklinks%20Library');">Library</a></li>
                    <li><a href="http://my.uwa.edu.au/" onclick="dcsMultiTrack('WT.ac', 'Quicklinks%20MyUWA');">MyUWA</a></li>
                    <li><a href="http://www.uwa.edu.au/webmail" onclick="dcsMultiTrack('WT.ac', 'Quicklinks%20Webmail');">Webmail</a></li>
                    <li><a href="http://webct.uwa.edu.au/webct/entryPageIns.dowebct" onclick="dcsMultiTrack('WT.ac', 'Quicklinks%20Webct');">WebCT</a></li>
                </ul>
<!--end-quicklinks-list-->
                <a id="ql_button" href="#">Quick&nbsp;Links</a>
                <div id="ql_extra"></div>
            </div></div><!--end #ql_outer, #ql_inner-->
	    </td>
	</tr>

	<tr>
	<td style="text-align: left;  vertical-align: middle; background-color: black;">
	    <img style="width: 200px;" alt="" src="/newcss/graphics/uwacrest.gif" />
	</td>
	<td style="text-align: right; vertical-align: middle; background-color: black;">
	    <img style="width: 400px;" alt="" src="/newcss/graphics/school-csse.gif" />
	    &nbsp;&nbsp;&nbsp;
	</td>
	</tr>

	<tr style="height: 6px; background-color: black;">
		<td colspan="2"></td>
	</tr>
	</table>

	<table>
	<tr style="background: url(/newcss/graphics/search-background.gif) repeat-x bottom;">
	    <td style="vertical-align: middle; white-space: nowrap;">

            <div class="vmiddle_outer"><div class="vmiddle_middle"><div class="vmiddle_inner">
                <div id="locallinks">
                    <ul>
<!--
  <li><a href="http://www.ecm.uwa.edu.au">Faculty Home</a></li>

  <li><a href="http://web.csse.uwa.edu.au">CSSE Home</a></li>
-->

  <li><a href="index.html">cnet's Home</a></li>

  <li><a href="api.html">cnet's API</a></li>

  <li><a href="faq.html">cnet's FAQ</a></li>
		    </ul>
		</div><!--end #locallinks-->

            </div></div></div><!--end .vmiddle_*-->
 
	    </td>
	    <td style="width: 80%;"></td>
	</tr>
	<tr>
	    <td style="height: 1px; background-color: #aaaaaa;" colspan=5></td>
	</tr>
	</table>

        <!--[if IE 6]></div></div><![endif]--><!--end .ie6expander, .ie6sizer-->
    </div><!--end #headercontainer-->

<table><tr>
<td style="font-size: 1.2em; padding:8px; text-align: left;" width="98%">

<!-- ----------------- BOTTOM-OF-HEADER ----------------------------- -->








<h3><i>cnet</i>'s datatypes, event types, and error types</a></h3>

<i>cnet's</i> provides a number of datatypes,
necessary to identify node types, link types, events, and errors.
Each datatype is defined in the <tt>&lt;cnet.h&gt;</tt> header file.

The datatypes are:

<ul id="bullet">
<li> the <a href="#nodetype"><tt>CnetNodeType</tt></a> enumerated type
<li> the <a href="#linktype"><tt>CnetLinkType</tt></a> enumerated type
<li> the <a href="#cnetcolour"><tt>CnetColour</tt></a> datatype
<li> the <a href="#cneterror"><tt>CnetError</tt></a> enumerated type
<li> the <a href="#cnetevent"><tt>CnetEvent</tt></a> enumerated type
<li> the <a href="#cnettime"><tt>CnetTime</tt></a> datatype
<li> the <a href="#nicaddr"><tt>CnetNICaddr</tt></a> datatype
<li> the <a href="#wlanresult"><tt>WLANRESULT</tt></a> enumerated type
</ul>
</p>

<p>
<a name="nodetype"></a>
<h3>The <tt>CnetNodeType</tt> enumerated type</h3>

Each node is either a host (such as a workstation),
a router,
a mobile node (such as a wireless PDA), or
a wireless accesspoint.
The type of a node may be determined by examining its value of
<tt>nodeinfo.nodetype</tt>.
For example:
</p>

<tt>
<pre>    <b>if</b>(nodeinfo.nodetype == NT_HOST)
        CNET_set_handler(EV_APPLICATIONREADY, appl_ready, 0);
</pre>
</tt>
</p>

<p>
<table style="border: 1px solid grey; width: 100%;">

<tr>
    <th class="thin">CnetNodeType</th>
    <th class="thin">meaning</th>
</tr>
<tr>
    <td class="attr0">NT_HOST</td>
    <td class="attr0">this node is a host with an Application Layer and keyboard</td>
</tr>

<tr>
    <td class="attr1">NT_ROUTER</td>
    <td class="attr1">this node is a router without an Application Layer or keyboard</td>
</tr>
<tr>
    <td class="attr0">NT_MOBILE</td>
    <td class="attr0">this node may move, may only have wireless links,
	maintains a record of its battery level,
	and has an Application Layer and keyboard</td>
</tr>

<tr>
    <td class="attr1">NT_ACCESSPOINT</td>
    <td class="attr1">this node is a wireless accesspoint, must have at least one
	wireless link,
	and has no Application Layer or keyboard</td>
</tr>
</table>
</p>

<p>
Note that calls to the functions
</p>

<p>
<pre><tt>    CNET_write_application,
    CNET_read_application,
    CNET_enable_application,
    CNET_disable_application and
    CNET_set_handler(EV_APPLICATIONLAYER,...) or
    CNET_set_handler(EV_KEYBOARDREADY,...)
</tt></pre>
</p>

<p>
are only valid if called from a node of
type <tt>NT_HOST</tt> or <tt>NT_MOBILE</tt>.
</p>

<p>
Calls to the functions
</p>

<p>
<pre><tt>    CNET_set_position</tt>, and
<tt>    CNET_set_battery
</tt></pre>
</p>

<p>
are only valid if called from a node of type <tt>NT_MOBILE</tt>.
</p>

<p>
<a name="linktype"></a>
<h3>The <tt>CnetLinkType</tt> enumerated type</h3>
Each node's links provide either a loopback service,
<i>wide-area-networking</i>,
<i>local-area-networking</i>, or
<i>wireless-local-area-networking</i>.
The type of a link may be determined by examining the value of
<tt>linkinfo[link].linktype</tt>.
For example:
</p>

<p>
<tt>
<pre>    <b>if</b>(linkinfo[link].linktype == LT_LAN)
        <b>if</b>(CNET_lan_busy(link))
            ..........
</pre>
</tt>
</p>

<p>
<table style="border: 1px solid grey; width: 100%;">

<tr>
    <th class="thin">CnetLinkType</th>
    <th class="thin">meaning</th>
</tr>
<tr>
    <td class="attr0">LT_LOOPBACK</td>
    <td class="attr0">this link (which will always be link <tt>0</tt>) is used to quickly
	transmit data from a node to <i>itself</i></td>
</tr>

<tr>
    <td class="attr1">LT_WAN</td>
    <td class="attr1">this link connects this node to one other node via a dedicated,
	point-to-point wide-area network link</td>
</tr>
<tr>
    <td class="attr0">LT_LAN</td>
    <td class="attr0">this link connects this node to other nodes via a simulation of
	an IEEE-802.3 shared segment</td>
</tr>

<tr>
    <td class="attr1">LT_WLAN</td>
    <td class="attr1">this link provides a wireless "connection"
	to all other wireless links that can receive its transmission</td>
</tr>
</table>
</p>

<p>
Calls to the function
</p>

<p>
<pre><tt>    CNET_set_nicaddr
</tt></pre>
</p>

<p>
may only be made for links of type <tt>LT_LAN</tt> or <tt>LT_WLAN</tt>.
</p>

<p>
<a name="cnetcolour"></a>
<h3>The <tt>CnetColour</tt> type</h3>
Colours are employed for some simple activities when <i>cnet</i>'s
execution is displayed via its GUI.

Colours are simple C strings,
such as "red" or "blue",
hexadecimal RGB-triples such as "#ffaa00",
or the special value <tt>CNET_LED_OFF</tt>.
</p>

<p>
When <a href="drawframes.html">drawing datalink frames</a>,
protocol code may specify the colour to be used to highlight
each field in each frame.
</p>

<p>
When wishing to present a quick indication of a node's status,
the function <a href="set_LED.html">CNET_set_LED</a> may be called with
the desired colour (string).
</p>

<p>
When drawing the wireless transmissions of
<a href="wlans.html">wireless LANs</a>,
the function <a href="set_wlancolour.html">CNET_set_wlancolour</a>
may be called to request how each transmission is drawn.
</p>

<p>
<a name="cneterror"></a>
<h3>The <tt>CnetError</tt> enumerated type</h3>
Most <i>cnet</i> API functions return the integer <tt>0</tt> on success
and the integer <tt>-1</tt> on failure.
The most recent error status is stored in
the global variable <tt>cnet_errno</tt>.
All values of <tt>cnet_errno</tt> will be instances of the
enumerated type <tt>CnetError</tt>.
Functions do not set the value of <tt>cnet_errno</tt> to
<tt>ER_OK</tt> if their execution was successful.
</p>

<p>
Errors may be reported to <tt>stderr</tt> with
<tt>CNET_perror()</tt> and their error message string accessed from
<tt>cnet_errstr[(<b>int</b>)cnet_errno]</tt>.
For example:
</p>

<p>
<tt>
<pre>
    <b>if</b>(CNET_write_application(msgbuffer, &amp;msglength) != 0) {
        // an error has occured
        <b>if</b>(cnet_errno == ER_BADSESSION) {
            // handle this special case
            ....
        }
        <b>else</b> {
            CNET_perror("writing to application");
        }
    }
</pre>
</tt>
</p>

<p>
<table style="border: 1px solid grey; width: 100%;">

<tr>
    <th class="thin">CnetError</th>
    <th class="thin">meaning</th>
</tr>
<tr>
    <td class="attr0">ER_OK</td>
    <td class="attr0">No error</td>
</tr>

<tr>
    <td class="attr1">ER_BADALLOC</td>
    <td class="attr1">Allocation of dynamic memory failed</td>
</tr>
<tr>
    <td class="attr0">ER_BADARG</td>
    <td class="attr0">Invalid argument passed to a function</td>
</tr>

<tr>
    <td class="attr1">ER_BADEVENT</td>
    <td class="attr1">Invalid event passed to a function</td>
</tr>
<tr>
    <td class="attr0">ER_BADLINK</td>
    <td class="attr0">Invalid link number passed to a function</td>
</tr>

<tr>
    <td class="attr1">ER_BADNODE</td>
    <td class="attr1">Invalid node passed to a function</td>
</tr>
<tr>
    <td class="attr0">ER_BADPOSITION</td>
    <td class="attr0">Attempt to move mobile node off the map</td>
</tr>

<tr>
    <td class="attr1">ER_BADSENDER</td>
    <td class="attr1">Application Layer given message from an unknown node</td>
</tr>
<tr>
    <td class="attr0">ER_BADSESSION</td>
    <td class="attr0">Application Layer given message from incorrect session</td>
</tr>

<tr>
    <td class="attr1">ER_BADSIZE</td>
    <td class="attr1">Indicated length is of incorrect size</td>
</tr>
<tr>
    <td class="attr0">ER_BADTIMER</td>
    <td class="attr0">Invalid CnetTimerID passed to a function</td>
</tr>

<tr>
    <td class="attr1">ER_CORRUPTFRAME</td>
    <td class="attr1">Attempt to transfer corrupt data
	(only seen if <a href="options.html#option-e">-e</a> provided)</td>
</tr>
<tr>
    <td class="attr0">ER_DUPLICATEMSG</td>
    <td class="attr0">Application Layer given a duplicate message</td>
</tr>

<tr>
    <td class="attr1">ER_LINKDOWN</td>
    <td class="attr1">Attempt to transmit on a link which is down</td>
</tr>
<tr>
    <td class="attr0">ER_MISSINGMSG</td>
    <td class="attr0">Application Layer given a message before all previous ones</td>
</tr>

<tr>
    <td class="attr1">ER_NOBATTERY</td>
    <td class="attr1">Battery exhaused on a mobile node</td>
</tr>
<tr>
    <td class="attr0">ER_NOTFORME</td>
    <td class="attr0">Application Layer given a message for another node</td>
</tr>

<tr>
    <td class="attr1">ER_NOTREADY</td>
    <td class="attr1">Function called when service not available</td>
</tr>
<tr>
    <td class="attr0">ER_NOTSUPPORTED</td>
    <td class="attr0">Invalid operation for this node or link type</td>
</tr>

<tr>
    <td class="attr1">ER_TOOBUSY</td>
    <td class="attr1">Link is too busy/congested to handle request</td>
</tr>
</table>
</p>

<p>
<a name="cnetevent"></a>
<h3>The <tt>CnetEvent</tt> enumerated type</h3>
All events in <i>cnet</i> are of type <tt>CnetEvent</tt>.
Events are <i>raised</i> when a number of important things occur
that (possibly) require action from your protocols.
Interest may be registered in each event by calling the function
<a href="set_handler"><tt>CNET_set_handler</tt></a>
and passing to it a function, an <i>event handler</i>,
to be called when the event is raised.
By default, no events are of interest (all are ignored).
</p>

<p>
When an event of interest is raised, its event handler is called,
with the event (an instance of <tt>CnetEvent</tt>)
passed as the first parameter.
</p>

<p>
<table style="border: 1px solid grey; width: 100%;">

<tr>
    <th class="thin">CnetEvent</th>
    <th class="thin">meaning</th>
</tr>
<tr>
    <td class="attr0">EV_NULL</td>
    <td class="attr0">this event is used internally and is never seen by your protocols</td>
</tr>

<tr>
    <td class="attr1">EV_REBOOT</td>
    <td class="attr1">raised as reboot_node(EV_REBOOT, ... , ...)</td>
</tr>
<tr>
    <td class="attr0">EV_SHUTDOWN</td>
    <td class="attr0">raised before cnet is (cleanly) terminated</td>
</tr>

<tr>
    <td class="attr1">EV_APPLICATIONREADY</td>
    <td class="attr1">raised when there is a message ready for delivery</td>
</tr>
<tr>
    <td class="attr0">EV_PHYSICALREADY</td>
    <td class="attr0">raised when a frame arrives at one of the links</td>
</tr>

<tr>
    <td class="attr1">EV_FRAMECOLLISION</td>
    <td class="attr1">raised when a frame collides on LT_LAN or LT_WLAN</td>
</tr>
<tr>
    <td class="attr0">EV_KEYBOARDREADY</td>
    <td class="attr0">raised when an input line is entered from the keyboard</td>
</tr>

<tr>
    <td class="attr1">EV_LINKSTATE</td>
    <td class="attr1">raised when a link changes state (either up or down)</td>
</tr>
<tr>
    <td class="attr0">EV_DRAWFRAME</td>
    <td class="attr0">raised when a frame is to be drawn in 2-node world</td>
</tr>

<tr>
    <td class="attr1">EV_PERIODIC</td>
    <td class="attr1">raised periodically if the
    <a href="options.html#option-f">-f</a> option provided</td>          
</tr>
<tr>
    <td class="attr0">EV_UPDATEGUI</td>
    <td class="attr0">raised whenever the Tcl/Tk GUI is being updated,
    as requested by the <a href="options.html#option-u">-u</a> option</td>
</tr>

<tr>
    <td class="attr1">EV_DEBUG0..EV_DEBUG4</td>
    <td class="attr1">raised when one of the debug buttons (under Tcl/Tk) is pressed</td>
</tr>
<tr>
    <td class="attr0">EV_TIMER0..EV_TIMER9</td>
    <td class="attr0">raised when a timer on any of the 10 timer queues expires</td>
</tr>
</table>
</p>

<p>
<a name="nicaddr"></a>
<h3>The <tt>CnetNICaddr</tt> datatype</h3>
Each Physical Layer link of type <tt>LT_WAN</tt>,
<tt>LT_LAN</tt>, or
<tt>LT_WLAN</tt>
has a specific Network Interface Card (NIC) address.
<i>cnet</i> provides the <tt>CnetNICaddr</tt> datatype to represent the
addresses of its NICs,
as an array of <tt>LEN_NICADDR</tt> (=6) unsigned characters.
Although <i>cnet</i> does not require it,
it is anticipated that frames will carry the address of their source and
destination Network Interface Cards (NIC) near the beginning of the frame.
</p>

<p>
<i>cnet</i> provides the functions
<a href="physical.html#parse_nicaddr"><tt>CNET_parse_nicaddr</tt></a> and
<a href="physical.html#format_nicaddr"><tt>CNET_format_nicaddr</tt></a>
to convert between character strings and the <tt>CnetNICaddr</tt> datatype.
</p>

<p>
<a name="cnettime"></a>
<h3>The <tt>CnetTime</tt> datatype</h3>
All times and periods in <i>cnet</i> are stored as an integral number
of microsconds.
This requires a sufficiently long integer representation to
avoid values "wrapping around" in most simulations.
<i>cnet</i> employs ISO-C99's standard <tt><b>int64_t</b></tt> datatype
to represent time:
</p>

<p>
<pre><tt>    <b>typedef int64_t</b>    CnetTime;
</tt></pre>
</p>

<p>
and all function arguments and structure fields
requiring a number of microseconds,
employ the </tt>CnetTime</tt> type.

Standard integer arithmetic, such as addition and subtraction,
and comparisons may be performed on <tt>CnetTime</tt> values,
and they may be conveniently formatted
with <a href="format64.html">CNET_format64</a>.
</p>

<p>
<a name="wlanresult"></a>
<h3>The <tt>WLANRESULT</tt> enumerated type</h3>

A simulation needing to define its own WLAN signal propagation model,
will call
<a href="set_wlan_model.html"><tt>CNET_set_wlan_model</tt></a>
to register a function that determines the
extent and success of wireless signal propagation.
This function must return one of the values of <tt>WLANRESULT</tt>:

<p>
<table style="border: 1px solid grey; width: 100%;">

<tr>
    <th class="thin">WLANRESULT</th>
    <th class="thin">meaning</th>
</tr>
<tr>
    <td class="attr0">WLAN_TOOWEAK</td>
    <td class="attr0">the receiver cannot hear the WLAN signal at all</td>
</tr>

<tr>
    <td class="attr1">WLAN_TOONOISY</td>
    <td class="attr1">the receiver can hear the WLAN signal, but cannot discern its
	contents from the background noise</td>
</tr>
<tr>
    <td class="attr0">WLAN_RECEIVED</td>
    <td class="attr0">the WLAN signal is both heard and decodable</td>
</tr>
</table>
</p>

<!-- -------------------- TOP-OF-FOOTER ------------------------------ -->

</td></tr></table>

<hr style="text-align: center;">
<p>
<span style="color: #666666; white-space: nowrap">
&nbsp;cnet v3.3.1, written by Chris.McDonald@uwa.edu.au<br>
&nbsp;Last modified: Thu Apr 10  4:35PM 2014
</span>

<!--[if IE]></div></div><![endif]--><!--end #IEroot targeting-->
</div><!--end #bodycontainer-->

</body>
</html>
